<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-router/app-router.html">

<polymer-element name="ivx-main-content" attributes="uriToShow">
  <template>
    <link rel="stylesheet" href="ivx-main-content.css">

    <!-- history support? -->
    <app-router id="router" mode="auto">
      <app-route path="/">
        <template>
          <ivx-page-welcome fit></ivx-page-welcome>
        </template>
      </app-route>

      <app-route path="/surveys">
        <template>
          <ivx-page-surveylist on-survey-selected="{{ onSurveySelected }}" fit></ivx-page-surveylist>
        </template>
      </app-route>

      <app-route path="/authorize">
        <template>
          <ivx-page-authorize fit></ivx-page-authorize>
        </template>
      </app-route>

      <app-route path="/survey/:id">
        <template>
          <ivx-page-survey surveyId="{{ id }}" fit></ivx-page-survey>
        </template>
      </app-route>
    </app-router>

  </template>

  <script>
    (function () {
      'use strict';

      Polymer({

        /* Init */
        domReady: function() {
        },

        /* Callbacks */
        onSurveySelected: function(event, detail, sender) {
          var surveyId = detail.survey.id;
          this.$.router.go('/survey/' + surveyId);
        },

        uriToShowChanged: function(oldVal, newVal) {
          this.$.router.go(newVal);
        }
      });

    })();
  </script>
</polymer-element>

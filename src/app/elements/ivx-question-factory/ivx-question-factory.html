<link rel="import" href="../../bower_components/polymer/polymer.html">

<polymer-element name="ivx-question-factory" attributes="text qtype optional maxRows">
  <template>
    <style>
      :host {
        display: block;
      }

      #question {
        font-size: 3rem;
      }
    </style>

    <div id="question">{{ text }}</div>
    <div id="content"></div>

  </template>

  <script>
    (function () {

      Polymer({

        // default config values
        publish: {
          // all elements
          text: 'Was halten Sie von ...?',
          qtype: 'text',
          optional: false,

          // text element only
          lines: 'single',
          maxRows: 5
        },

        // check if the element exists, if not show an error
        domReady: function() {
          var qtypeName = 'ivx-qtype-' + this.qtype;
          try {
            document.registerElement(qtypeName);
          } catch(e) {
            // element exists -> render
            this._renderElement(qtypeName);
            return;
          }

          console.log('The questiontype "' + this.qtype + '" doesnt exist, please use another.');
        },

        _renderElement: function(name) {
          var qtype = document.createElement(name);

          // walk through all the published attributes of the target element
          // and set the parameters to the given property values
          Object.keys(qtype.publish).forEach(function(attr, i) {
            if (this[attr]) {
              qtype[attr] = this[attr];
            }
          }, this);

          this.$.content.appendChild(qtype);
        }
      });

    })();
  </script>
</polymer-element>

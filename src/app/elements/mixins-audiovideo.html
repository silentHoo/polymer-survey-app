<script>
  /**
   * These object gives a recording component shared functionality to use and maintain in a central file.
   *
   * Please refer to https://www.polymer-project.org/docs/polymer/helpers.html#using-mixins for more information.
   */
  var mixinsAudioVideo = {

    _duration: -1,
    _startTime: -1,
    _stopTime: -1,

    _stateEnum: {
      IDLE: 0,
      RECORDING: 1,
      STOPPED: 2
    },
    _state: 0,

    startRecord: function() {
      if (this._state == this._stateEnum.RECORDING) {
        return false;
      }

      this._startTime = Date.now();
      this._state = this._stateEnum.RECORDING;
      return true;
    },

    stopRecord: function() {
      if (this._state != this._stateEnum.RECORDING) {
        return false;
      }

      this._stopTime = Date.now();
      this._duration = this._stopTime - this._startTime;
      this._state = this._stateEnum.STOPPED;
      return true;
    },

    getDuration: function() {
      if (this._state == this._stateEnum.IDLE) {
        return -1;
      }

      if (this._state == this._stateEnum.RECORDING) {
        return (Date.now() - this._startTime);
      }

      if (this._state == this._stateEnum.STOPPED) {
        return this._duration;
      }
    }

    // ===== private methods =====
  };
</script>
